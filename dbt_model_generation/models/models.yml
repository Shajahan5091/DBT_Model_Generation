version: 2

models:
  - name: DimCustomer
    description: Customer dimension table containing customer details including personal information and location data
    columns:
      - name: customer_id
        description: Unique identifier for each customer
      - name: full_name
        description: Customer's full name created by concatenating first name and last name
      - name: email
        description: Customer's email address
      - name: phone
        description: Customer's phone number
      - name: city
        description: Customer's city obtained through lookup based on customer_id
      - name: state
        description: Customer's state obtained through lookup based on customer_id
      - name: country
        description: Customer's country obtained through lookup based on customer_id
      - name: is_current
        description: Boolean flag indicating if customer is active based on created timestamp being less than 2 years from current date

  - name: DimProduct
    description: Product dimension table containing product information including pricing and availability status
    columns:
      - name: product_id
        description: Unique identifier for each product
      - name: product_name
        description: Name of the product
      - name: brand
        description: Brand name of the product
      - name: category_name
        description: Product category name obtained through lookup based on product_id
      - name: current_unit_price
        description: Current unit price after applying discount percentage from Product_Discount table
      - name: active_flag
        description: Boolean flag indicating product availability based on quantity on hand

  - name: FactInventorySnapshot
    description: Fact table capturing inventory levels at specific points in time across warehouses
    columns:
      - name: snapshot_date
        description: Date when the inventory snapshot was taken
      - name: product_id
        description: Unique identifier for the product
      - name: warehouse_id
        description: Unique identifier for the warehouse
      - name: quantity_on_hand
        description: Available quantity of product in the warehouse

  - name: FactPayment
    description: Fact table containing payment transaction details for orders
    columns:
      - name: order_id
        description: Unique identifier for the order
      - name: payment_method
        description: Method used for payment
      - name: amount_paid
        description: Total amount paid for the order
      - name: payment_date
        description: Date when the payment was processed

  - name: FactReturns
    description: Fact table tracking product returns with reasons and associated order information
    columns:
      - name: return_date
        description: Date when the product was returned
      - name: order_line_id
        description: Unique identifier for the order line item
      - name: product_id
        description: Product identifier obtained through lookup from Order_Line based on order_line_id
      - name: return_reason
        description: Reason provided for the product return

  - name: FactSales
    description: Fact table containing sales transaction details with calculated amounts and discounts
    columns:
      - name: order_date
        description: Date when the order was placed
      - name: customer_id
        description: Unique identifier for the customer
      - name: product_id
        description: Unique identifier for the product
      - name: order_id
        description: Unique identifier for the order
      - name: order_line_id
        description: Unique identifier for the order line item
      - name: quantity_sold
        description: Quantity of product sold
      - name: gross_amount
        description: Total amount before discount calculated as quantity multiplied by unit price
      - name: discount_amount
        description: Discount amount calculated as unit price multiplied by discount percentage
      - name: net_amount
        description: Final amount after discount calculated as gross amount minus discount amount

  - name: FactShipment
    description: Fact table tracking shipment details and delivery status for orders
    columns:
      - name: order_id
        description: Unique identifier for the order
      - name: shipped_date
        description: Date when the order was shipped
      - name: delivery_date
        description: Date when the order was delivered
      - name: status
        description: Current status of the shipment