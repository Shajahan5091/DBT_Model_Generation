version: 2

models:
  - name: DimCustomer
    description: Customer dimension table containing customer details and location information
    columns:
      - name: customer_id
        description: Unique identifier for each customer
      - name: full_name
        description: Customer's full name concatenated from first and last name
      - name: email
        description: Customer's email address
      - name: phone
        description: Customer's phone number
      - name: city
        description: Customer's city based on customer location lookup
      - name: state
        description: Customer's state based on customer location lookup
      - name: country
        description: Customer's country based on customer location lookup
      - name: is_current
        description: Flag indicating if customer is active based on creation date within last 2 years

  - name: DimProduct
    description: Product dimension table containing product details and pricing information
    columns:
      - name: product_id
        description: Unique identifier for each product
      - name: product_name
        description: Name of the product
      - name: brand
        description: Brand name of the product
      - name: category_name
        description: Product category name looked up from category reference
      - name: current_unit_price
        description: Current unit price after applying discount percentage
      - name: active_flag
        description: Flag indicating if product is active based on quantity on hand

  - name: FactInventorySnapshot
    description: Daily snapshot of inventory levels across warehouses
    columns:
      - name: snapshot_date
        description: Date of the inventory snapshot
      - name: product_id
        description: Unique identifier for the product
      - name: warehouse_id
        description: Unique identifier for the warehouse
      - name: quantity_on_hand
        description: Quantity of product available in the warehouse

  - name: FactPayment
    description: Payment transaction fact table containing payment details
    columns:
      - name: order_id
        description: Unique identifier for the order
      - name: payment_method
        description: Method used for payment
      - name: amount_paid
        description: Total amount paid for the order
      - name: payment_date
        description: Date when payment was processed

  - name: FactReturns
    description: Product returns fact table containing return transaction details
    columns:
      - name: return_date
        description: Date when the product was returned
      - name: order_line_id
        description: Unique identifier for the order line item
      - name: product_id
        description: Unique identifier for the returned product
      - name: return_reason
        description: Reason provided for the product return

  - name: FactSales
    description: Sales transaction fact table containing order and sales details
    columns:
      - name: order_date
        description: Date when the order was placed
      - name: customer_id
        description: Unique identifier for the customer
      - name: product_id
        description: Unique identifier for the product
      - name: order_id
        description: Unique identifier for the order
      - name: order_line_id
        description: Unique identifier for the order line item
      - name: quantity_sold
        description: Quantity of product sold
      - name: gross_amount
        description: Gross sales amount calculated as quantity times unit price
      - name: discount_amount
        description: Discount amount applied to the sale
      - name: net_amount
        description: Net sales amount after applying discounts

  - name: FactShipment
    description: Shipment fact table containing delivery and shipping information
    columns:
      - name: order_id
        description: Unique identifier for the order
      - name: shipped_date
        description: Date when the order was shipped
      - name: delivery_date
        description: Date when the order was delivered
      - name: status
        description: Current status of the shipment